name: Version Report

on:
  workflow_dispatch:

jobs:
  scan:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v6

      - name: Detectar runtimes reais
        run: |
          echo "REPO=${{ github.repository }}" > report.txt

          if command -v python >/dev/null; then
            echo "Python:" >> report.txt
            python --version >> report.txt
          fi

          if command -v node >/dev/null; then
            echo "Node:" >> report.txt
            node -v >> report.txt
          fi

          if command -v java >/dev/null; then
            echo "Java:" >> report.txt
            java -version >> report.txt 2>&1
          fi

          grep -i postgres -R . || true
          grep -i mysql -R . || true
          grep -i mongo -R . || true

      - name: Salvar resultado
        uses: actions/upload-artifact@v4
        with:
          name: version-report
          path: report.txt

